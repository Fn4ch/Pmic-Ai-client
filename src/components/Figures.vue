<template>
    <div class="figures">
        <div class="square figure">
            <svg width="155" height="154" viewBox="0 0 155 154" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g id="Vector" filter="url(#filter0_d_1614_126881)">
                <path d="M48.8801 0.203011L4.61328 101.682L106.092 145.948L150.359 44.4698L48.8801 0.203011Z" fill="#5C9FFF"/>
                </g>
                <defs>
                <filter id="filter0_d_1614_126881" x="0.613281" y="0.203125" width="153.746" height="153.745" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                <feOffset dy="4"/>
                <feGaussianBlur stdDeviation="2"/>
                <feComposite in2="hardAlpha" operator="out"/>
                <feColorMatrix type="matrix" values="0 0 0 0 0.0930781 0 0 0 0 0.329658 0 0 0 0 0.671384 0 0 0 0.2 0"/>
                <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1614_126881"/>
                <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1614_126881" result="shape"/>
                </filter>
                </defs>
            </svg>
        </div>
        <div class="circle figure">
            <svg width="68" height="68" viewBox="0 0 68 68" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g id="Vector" filter="url(#filter0_d_1614_126890)">
                <path d="M4.21022 29.5005C4.09374 45.7931 17.2071 59.0953 33.4997 59.2117C49.7923 59.3282 63.0945 46.2149 63.211 29.9223C63.3275 13.6297 50.2141 0.327453 33.9215 0.210977C17.6289 0.0945007 4.3267 13.2079 4.21022 29.5005Z" fill="#FA6905" fill-opacity="0.6" shape-rendering="crispEdges"/>
                </g>
                <defs>
                <filter id="filter0_d_1614_126890" x="0.208984" y="0.209961" width="67.002" height="67.0029" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                <feOffset dy="4"/>
                <feGaussianBlur stdDeviation="2"/>
                <feComposite in2="hardAlpha" operator="out"/>
                <feColorMatrix type="matrix" values="0 0 0 0 0.721384 0 0 0 0 0.363589 0 0 0 0 0.118045 0 0 0 0.2 0"/>
                <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1614_126890"/>
                <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1614_126890" result="shape"/>
                </filter>
                </defs>
            </svg>
        </div>
        <div class="circle-2 figure">
           <svg width="120" height="120" viewBox="0 0 69 67" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g id="Vector" filter="url(#filter0_d_1614_126890)">
                    <path d="M4.21022 29.5005C4.09374 45.7931 17.2071 59.0953 33.4997 59.2117C49.7923 59.3282 63.0945 46.2149 63.211 29.9223C63.3275 13.6297 50.2141 0.327453 33.9215 0.210977C17.6289 0.0945007 4.3267 13.2079 4.21022 29.5005Z" fill="#FA6905" fill-opacity="0.6" shape-rendering="crispEdges"/>
                </g>
                <defs>
                    <filter id="filter0_d_1614_126890" x="0.208984" y="0.209961" width="67.002" height="67.0029" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                    <feOffset dy="4"/>
                    <feGaussianBlur stdDeviation="2"/>
                    <feComposite in2="hardAlpha" operator="out"/>
                    <feColorMatrix type="matrix" values="0 0 0 0 0.721384 0 0 0 0 0.363589 0 0 0 0 0.118045 0 0 0 0.2 0"/>
                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1614_126890"/>
                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1614_126890" result="shape"/>
                    </filter>
                </defs>
            </svg>
        </div>
        <div class="square-2 figure">
            <svg width="96" height="115" viewBox="0 0 96 115" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g id="Vector" filter="url(#filter0_d_1614_126892)">
                <path d="M76.5664 0.000462363L4 70.8086L39.0531 106.732L91.3041 93.7798L76.5664 0.000462363Z" fill="#5C9FFF"/>
                </g>
                <defs>
                <filter id="filter0_d_1614_126892" x="0" y="0" width="95.3047" height="114.732" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                <feOffset dy="4"/>
                <feGaussianBlur stdDeviation="2"/>
                <feComposite in2="hardAlpha" operator="out"/>
                <feColorMatrix type="matrix" values="0 0 0 0 0.0930781 0 0 0 0 0.329658 0 0 0 0 0.671384 0 0 0 0.2 0"/>
                <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1614_126892"/>
                <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1614_126892" result="shape"/>
                </filter>
                </defs>
            </svg>
        </div>
        <div class="square-3 figure">
            <svg width="155" height="154" viewBox="0 0 155 154" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g id="Vector" filter="url(#filter0_d_1614_126881)">
                <path d="M48.8801 0.203011L4.61328 101.682L106.092 145.948L150.359 44.4698L48.8801 0.203011Z" fill="#5C9FFF"/>
                </g>
                <defs>
                <filter id="filter0_d_1614_126881" x="0.613281" y="0.203125" width="153.746" height="153.745" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                <feOffset dy="4"/>
                <feGaussianBlur stdDeviation="2"/>
                <feComposite in2="hardAlpha" operator="out"/>
                <feColorMatrix type="matrix" values="0 0 0 0 0.0930781 0 0 0 0 0.329658 0 0 0 0 0.671384 0 0 0 0.2 0"/>
                <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1614_126881"/>
                <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1614_126881" result="shape"/>
                </filter>
                </defs>
            </svg>
        </div>
    </div>
</template>

<script setup lang="ts">
import { onMounted, onUnmounted, ref } from 'vue';

const figures = ref<HTMLElement[] | null>(null)
const app: HTMLElement | null = document.getElementById('app')

onMounted(() => {
    app?.addEventListener('mousemove', handleMouseMove)       
    figures.value = Array.from(app?.querySelectorAll('.figure') || []) 
})

onUnmounted(() => {
    app?.removeEventListener('mousemove', handleMouseMove)        
})

const handleMouseMove = ((e: MouseEvent) => {
    if (app && figures !== null) {
    const containerWidth = app.clientWidth;
    const containerHeight = app.clientHeight;

    const mouseX = e.clientX;
    const mouseY = e.clientY;

    const offsetX = 0.5 - mouseX / containerWidth;
    const offsetY = 0.5 - mouseY / containerHeight;

    const parallaxStrength = 50; // Adjust this value to control the parallax effect strength

    if (figures.value) {
        figures.value.forEach((figure, index) => {
            const depth = index * 0.3 + 1; // Adjust this value to control the depth of each figure
            figure.style.transform = `translate(${offsetX * parallaxStrength * depth}px, ${offsetY * parallaxStrength * depth}px)`;
        })
    }
    }
})
</script>

<style lang="scss" scoped>
.figures{
    max-width: 100%;
}
.figure{
    z-index: 1;
    position: absolute;
    top: 0;
    right: 0;
    transition: all 0.1s ease-out;
    @media (max-width: 1024px) {
        display: none;
    }
}
.square{
    padding-top: 12vh;
    padding-right: 8vw;
}
.circle{
    padding-top: 37vh;
    padding-right: 12vw;
}
.square-2{
    padding-top: 52vh;
    padding-right: 14.5vw;
}
.circle-2{
    padding-top: 50vh;
    padding-right: 0;
}
.square-3{
    padding-top: 72vh;
    padding-right: 0;
}
</style>